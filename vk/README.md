# Worker Pool (Go)

Реализован примитивный worker-pool с возможностью динамически добавлять и удалять воркеры.  
Входные данные (строки) поступают в канал, воркеры их обрабатывают (например, выводят на экран номер воркера и сами данные).

---

## Архитектура

###  `Worker`
- `NewWorker(id int, task func(id, msg string), parentCtx context.Context)`  
  Создает воркера с собственным `context`, связанным с родительским.
- `DoWork(input <-chan string, wg *sync.WaitGroup)`  
  Бесконечный цикл получения задач из входного канала и вызова `task`; корректно завершается при отмене контекста.
- `StopWork()`  
  Вызывает отмену контекста для завершения работы воркера.

###  `WorkerPool` — управляет воркерами, задачами и синхронизацией:
- `NewWorkerPool(task func(id, msg string))`  
  Инициализирует пул с задачей, общим контекстом и каналом ввода.
- `addWorker()`  
  Добавляет одного воркера в пул (внутренний метод).
- `AddWorkers(count int)`  
  Добавляет `count+1` воркеров (включая 0).
- `Remove(id int)`  
  Завершает и удаляет воркера по ID.
- `Start()`  
  Запускает всех текущих воркеров на выполнение задач.
- `Stop()`  
  Завершает всех воркеров и закрывает канал ввода.
- `WaitAndStop()`  
  Ожидает завершения всех задач и затем вызывает `Stop()`.
- `Submit(data []string)`  
  Добавляет задачи (строки) в общий канал и увеличивает `WaitGroup`.

---

##  Тестирование

В пакете `worker` реализованы юнит-тесты, проверяющие корректность работы пула:

###  `TestWorkerPool_Processing`
Проверяет базовую обработку входных данных.  
Ожидается, что каждый элемент будет обработан одним из доступных воркеров.

###  `TestWorkerPool_RemoveWorker`
Проверяет корректное удаление воркера.  
После удаления воркер не должен участвовать в обработке новых заданий.

###  `TestWorkerPool_LargeSubmit`
Проверяет устойчивость пула при подаче большого количества задач (100 сообщений).  
Все задачи должны быть обработаны.

###  `TestWorkerPool_ManualStop`
Проверяет ручную остановку пула (`Stop`) до завершения обработки всех задач.  
Не вызывает `Wait`, а просто останавливает всех воркеров.
